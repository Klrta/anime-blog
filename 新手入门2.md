# æ–°æ‰‹å…¥é—¨æŒ‡å— (è¿›é˜¶ç¯‡)

æ­å–œä½ å®Œæˆäº†ç¬¬ä¸€é˜¶æ®µçš„åšå®¢æ­å»ºï¼ç°åœ¨çš„ä½ å·²ç»æ‹¥æœ‰äº†ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡ã€ç¾è§‚çš„ä¸ªäººåšå®¢ã€‚
ä½†è¿™åªæ˜¯å¼€å§‹ã€‚åœ¨è¿›é˜¶ç¯‡ä¸­ï¼Œæˆ‘ä»¬å°†æ¢ç´¢æ›´å¤šæœ‰è¶£çš„åŠŸèƒ½ï¼ŒæŠŠä½ çš„åšå®¢æ‰“é€ æˆçœŸæ­£çš„â€œå…¨èƒ½æˆ˜èˆ°â€ã€‚

## å­¦ä¹ è·¯çº¿å›¾ (Roadmap)

### 1. äº¤äº’ä¸åŠŸèƒ½å¢å¼º
- [ ] **è¯„è®ºç³»ç»Ÿ**: è®©è®¿å®¢èƒ½ç•™è¨€ï¼ˆæ¨è Giscusï¼ŒåŸºäº GitHub Discussionsï¼Œå…è´¹ä¸”æ— å¹¿å‘Šï¼Œéå¸¸é€‚åˆç¨‹åºå‘˜åšå®¢ï¼‰ã€‚
- [ ] **ç«™å†…æœç´¢**: å½“æ–‡ç« å˜å¤šæ—¶ï¼Œä¸€ä¸ªæœç´¢æ¡†æ˜¯å¿…ä¸å¯å°‘çš„ï¼ˆå¯ä»¥ä½¿ç”¨ç®€å•çš„æœ¬åœ°æœç´¢æˆ–è€… Algoliaï¼‰ã€‚
- [ ] **åˆ†é¡µåŠŸèƒ½**: é¦–é¡µæ–‡ç« å¤ªå¤šåŠ è½½æ…¢ï¼Ÿå­¦å­¦æ€ä¹ˆåšåˆ†é¡µ (Pagination)ã€‚
- [ ] **RSS è®¢é˜…**: è®©å–œæ¬¢ä½ åšå®¢çš„äººèƒ½é€šè¿‡ RSS é˜…è¯»å™¨è®¢é˜…æ›´æ–°ã€‚

### 2. è§†è§‰ä¸ä½“éªŒä¼˜åŒ–
- [ ] **å›¾ç‰‡ä¼˜åŒ–**: å­¦ä¹  Next.js çš„ `<Image>` ç»„ä»¶ï¼Œè‡ªåŠ¨å‹ç¼©å›¾ç‰‡ï¼Œé˜²æ­¢é¡µé¢åŠ è½½å¡é¡¿ã€‚
- [ ] **é¡µé¢åˆ‡æ¢åŠ¨ç”»**: ä½¿ç”¨ `framer-motion` ç»™é¡µé¢åˆ‡æ¢åŠ ä¸Šä¸æ»‘çš„è¿‡æ¸¡æ•ˆæœã€‚
- [ ] **è‡ªå®šä¹‰å­—ä½“**: å¼•å…¥æ›´å¥½çœ‹çš„ä¸ªæ€§åŒ–å­—ä½“ã€‚

### 3. å†…å®¹å¢å¼º (MDX)
- [ ] **MDX å‡çº§**: ç°åœ¨çš„ Markdown åªèƒ½å†™æ–‡å­—å’Œå›¾ã€‚å‡çº§åˆ° MDX åï¼Œä½ å¯ä»¥åœ¨æ–‡ç« é‡Œç›´æ¥æ’å…¥ React ç»„ä»¶ï¼ˆæ¯”å¦‚ä¸€ä¸ªå¯äº¤äº’çš„å›¾è¡¨ã€ä¸€ä¸ªéŸ³ä¹æ’­æ”¾å™¨ã€æˆ–è€…ä¸€ä¸ª B ç«™è§†é¢‘å¡ç‰‡ï¼‰ã€‚

### 4. è¿ç»´ä¸ SEO
- [ ] **SEO ä¼˜åŒ–**: è®©æœç´¢å¼•æ“æ›´å®¹æ˜“æœåˆ°ä½ çš„åšå®¢ï¼ˆMetadata, Sitemapï¼‰ã€‚
- [ ] **æ•°æ®ç»Ÿè®¡**: çœ‹çœ‹æœ‰å¤šå°‘äººè®¿é—®äº†ä½ çš„åšå®¢ï¼ˆVercel Analyticsï¼‰ã€‚

---

## å»ºè®®çš„ä¸‹ä¸€æ­¥
æ—¢ç„¶ä½ å·²ç»æœ‰äº†æ ‡ç­¾åŠŸèƒ½ï¼ˆæˆ‘çœ‹æ„å»ºæ—¥å¿—é‡Œæœ‰ `/tags`ï¼‰ï¼Œä¸å¦‚æˆ‘ä»¬å…ˆä» **è¯„è®ºç³»ç»Ÿ** æˆ–è€… **ç«™å†…æœç´¢** å¼€å§‹ï¼Ÿè¿™ä¸¤ä¸ªåŠŸèƒ½å¯¹åšå®¢çš„äº’åŠ¨æ€§æå‡æœ€å¤§ã€‚

æˆ–è€…ï¼Œå¦‚æœä½ è§‰å¾—ç°åœ¨çš„æ–‡ç« æ’ç‰ˆè¿˜ä¸å¤Ÿä¸°å¯Œï¼Œæˆ‘ä»¬å¯ä»¥å°è¯• **MDX**ã€‚

**ä½ æƒ³å…ˆå­¦å“ªä¸ªï¼Ÿå‘Šè¯‰æˆ‘ï¼Œæˆ‘ä»¬å°±åœ¨è¿™ä¸ªæ–‡æ¡£é‡Œå¼€å§‹æ–°çš„æ•™ç¨‹ï¼**



ä¸‹ä¸€æ­¥:å­¦ä¹ **è¯„è®ºç³»ç»Ÿ**: è®©è®¿å®¢èƒ½ç•™è¨€.æ¨è Giscusï¼ŒåŸºäº GitHub Discussions.

---

# ç¬¬ä¸€ç« ï¼šç»™åšå®¢æ·»åŠ è¯„è®ºç³»ç»Ÿ (Giscus)

Giscus æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„è¯„è®ºç³»ç»Ÿï¼Œå®ƒåˆ©ç”¨ GitHub çš„ "Discussions" (è®¨è®ºåŒº) åŠŸèƒ½æ¥å­˜å‚¨è¯„è®ºã€‚è¿™æ„å‘³ç€ä½ çš„æ•°æ®å®Œå…¨æŒæ¡åœ¨è‡ªå·±æ‰‹é‡Œï¼Œè€Œä¸”å…è´¹ã€æ— å¹¿å‘Šã€‚

## ç¬¬ä¸€æ­¥ï¼šGitHub ä»“åº“é…ç½® (ä½ éœ€è¦äº²è‡ªæ“ä½œ)

å› ä¸ºæ¶‰åŠåˆ°ä½ çš„ GitHub æƒé™ï¼Œè¿™ä¸€æ­¥éœ€è¦ä½ å» GitHub ç½‘ç«™ä¸Šæ“ä½œï¼š

1.  **å¼€å¯ Discussions åŠŸèƒ½**ï¼š
    *   æ‰“å¼€ä½ çš„ GitHub ä»“åº“é¡µé¢ (`anime-blog`)ã€‚
    *   ç‚¹å‡»ä¸Šæ–¹çš„ **Settings** (è®¾ç½®)ã€‚
    *   åœ¨ General (å¸¸è§„) é¡µé¢å‘ä¸‹æ»šåŠ¨ï¼Œæ‰¾åˆ° **Features** (åŠŸèƒ½) åŒºåŸŸã€‚
    *   å‹¾é€‰ **Discussions**ã€‚

2.  **å®‰è£… Giscus App**ï¼š
    *   è®¿é—® [Giscus App](https://github.com/apps/giscus) é¡µé¢ã€‚
    *   ç‚¹å‡» **Install**ï¼Œé€‰æ‹©ä½ çš„ `anime-blog` ä»“åº“è¿›è¡Œå®‰è£…ã€‚

3.  **è·å–é…ç½®å‚æ•°**ï¼š
    *   è®¿é—® [Giscus å®˜ç½‘](https://giscus.app/zh-CN)ã€‚
    *   åœ¨é¡µé¢ä¸Šè¾“å…¥ä½ çš„ä»“åº“å (ä¾‹å¦‚ `Klrta/anime-blog`)ã€‚
    *   åœ¨â€œé¡µé¢ â†”ï¸ discussion æ˜ å°„å…³ç³»â€ä¸­ï¼Œæ¨èé€‰æ‹© **"Discussion title contains page title"**ã€‚
    *   åœ¨â€œDiscussion åˆ†ç±»â€ä¸­ï¼Œæ¨èé€‰æ‹© **"Announcements"** (æˆ–è€…ä½ è‡ªå·±æ–°å»ºä¸€ä¸ªå« Comments çš„åˆ†ç±»)ã€‚
    *   **å…³é”®æ­¥éª¤**ï¼šæ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨ï¼Œä½ ä¼šçœ‹åˆ°ä¸€æ®µç”Ÿæˆçš„ä»£ç ã€‚æˆ‘ä»¬éœ€è¦å…¶ä¸­çš„ `data-repo-id` å’Œ `data-category-id` è¿™ä¸¤ä¸ªå€¼ã€‚

## ç¬¬äºŒæ­¥ï¼šåˆ›å»ºè¯„è®ºç»„ä»¶

æ‹¿åˆ° ID åï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™ä»£ç äº†ã€‚

1.  **å®‰è£…ä¾èµ–**ï¼š
    æˆ‘ä»¬éœ€è¦ä¸€ä¸ªåº“æ¥æ–¹ä¾¿åœ°å¼•å…¥ Giscusã€‚
    ```bash
    npm install @giscus/react
    ```

2.  **æ–°å»ºç»„ä»¶æ–‡ä»¶**ï¼š
    åˆ›å»º `src/components/Comments.tsx`ï¼Œä»£ç å¦‚ä¸‹ï¼š
    *(è¯·æŠŠä¸‹é¢çš„ `repoId` å’Œ `categoryId` æ¢æˆä½ åˆšæ‰è·å–åˆ°çš„)*

    ```tsx
    'use client';
    
    import Giscus from '@giscus/react';
    import { useTheme } from 'next-themes';
    
    export default function Comments() {
      const { theme } = useTheme();
    
      return (
        <div className="mt-10 pt-10 border-t border-gray-200 dark:border-gray-800">
          <Giscus
            id="comments"
            repo="Klrta/anime-blog" // ä½ çš„ä»“åº“å
            repoId="YOUR_REPO_ID"   // æ›¿æ¢è¿™é‡Œï¼ï¼ï¼
            category="Announcements"
            categoryId="YOUR_CATEGORY_ID" // æ›¿æ¢è¿™é‡Œï¼ï¼ï¼
            mapping="title"
            reactionsEnabled="1"
            emitMetadata="0"
            inputPosition="top"
            theme={theme === 'dark' ? 'transparent_dark' : 'light'}
            lang="zh-CN"
            loading="lazy"
          />
        </div>
      );
    }
    ```

## ç¬¬ä¸‰æ­¥ï¼šåœ¨æ–‡ç« é¡µå¼•å…¥

æœ€åï¼ŒæŠŠè¿™ä¸ªç»„ä»¶æ”¾åˆ°æ–‡ç« è¯¦æƒ…é¡µçš„æœ€ä¸‹é¢ã€‚
æ‰“å¼€ `src/app/posts/[id]/page.tsx`ï¼š

```tsx
// ... å…¶ä»–å¼•å…¥
import Comments from '@/components/Comments'; // å¼•å…¥ç»„ä»¶

export default async function Post({ params }: { params: Promise<{ id: string }> }) {
  // ... å‰é¢çš„ä»£ç 

  return (
    <div className="...">
      <article className="...">
        {/* ... æ–‡ç« å¤´éƒ¨å’Œæ­£æ–‡ ... */}
        
        {/* åœ¨ article ç»“æŸæ ‡ç­¾ä¹‹å‰ï¼Œæˆ–è€…ä¹‹åï¼Œæ”¾å…¥è¯„è®ºç»„ä»¶ */}
        <Comments />
      </article>
    </div>
  );
}
```

---

# ç¬¬äºŒç« ï¼šç»Ÿä¸€æ–‡ç« è¯¦æƒ…é¡µçš„é£æ ¼

ä½ å¯èƒ½æ³¨æ„åˆ°äº†ï¼Œå½“ä½ ç‚¹è¿›ä¸€ç¯‡æ–‡ç« æ—¶ï¼Œé¡¶éƒ¨çš„å¯¼èˆªæ ä¸è§äº†ï¼Œè€Œä¸”èƒŒæ™¯ä¹Ÿä¸åƒé¦–é¡µé‚£æ ·æ˜¯æ»šåŠ¨çš„ã€‚è¿™æ˜¯å› ä¸ºæ–‡ç« è¯¦æƒ…é¡µ (`src/app/posts/[id]/page.tsx`) è¿˜æ²¡æœ‰æ›´æ–°æ ·å¼ã€‚

è®©æˆ‘ä»¬æŠŠå®ƒä¹Ÿå˜å¾—æ¼‚äº®ä¸”ç»Ÿä¸€ã€‚

## 1. ä¿®æ”¹æ–‡ç« é¡µä»£ç 

æ‰“å¼€ `src/app/posts/[id]/page.tsx`ï¼Œç”¨ä¸‹é¢çš„ä»£ç å®Œå…¨æ›¿æ¢å®ƒã€‚
è¿™æ®µä»£ç åšäº†ä»¥ä¸‹æ”¹è¿›ï¼š
1.  **æ·»åŠ äº†å¯¼èˆªæ **ï¼šå’Œé¦–é¡µã€å½’æ¡£é¡µä¿æŒä¸€è‡´ã€‚
2.  **èƒŒæ™¯é€æ˜åŒ–**ï¼šå»æ‰äº† `bg-anime-cream`ï¼Œè®©å…¨å±€æ»šåŠ¨èƒŒæ™¯é€å‡ºæ¥ã€‚
3.  **æš—é»‘æ¨¡å¼é€‚é…**ï¼šæ–‡å­—é¢œè‰²å’ŒèƒŒæ™¯è‰²éƒ½é€‚é…äº†æ·±è‰²æ¨¡å¼ã€‚

```tsx
import Link from 'next/link';
import { getPostData, getAllPosts } from '@/lib/posts';
import Comments from '@/components/Comments';
import ThemeToggle from '@/components/ThemeToggle';

// ç”Ÿæˆé™æ€è·¯å¾„
export async function generateStaticParams() {
  const posts = getAllPosts();
  return posts.map((post) => ({
    id: post.id,
  }));
}

// é¡µé¢ç»„ä»¶
export default async function Post({ params }: { params: Promise<{ id: string }> }) {
  const { id } = await params;
  const postData = await getPostData(id);

  return (
    <div className="min-h-screen text-gray-800 dark:text-gray-100 font-sans relative z-10">
      {/* Header (ä¸é¦–é¡µä¿æŒä¸€è‡´) */}
      <header className="fixed top-0 w-full z-50 backdrop-blur-md bg-white/30 dark:bg-black/30 border-b border-white/20 dark:border-white/10">
        <div className="max-w-6xl mx-auto px-6 h-16 flex items-center justify-between">
          <div className="text-xl font-bold text-anime-blue tracking-wider">
            AnimeBlog
          </div>
          <nav className="flex gap-6 text-sm font-medium text-gray-600 dark:text-gray-300 items-center">
            <Link href="/" className="hover:text-anime-pink transition-colors">é¦–é¡µ</Link>
            <Link href="/archive" className="hover:text-anime-pink transition-colors">å½’æ¡£</Link>
            <Link href="/about" className="hover:text-anime-pink transition-colors">å…³äº</Link>
            <ThemeToggle />
          </nav>
        </div>
      </header>

      {/* æ–‡ç« å†…å®¹ */}
      <main className="pt-24 pb-16 px-6">
        <article className="max-w-3xl mx-auto bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-3xl shadow-xl shadow-anime-pink/10 dark:shadow-none overflow-hidden border border-white/50 dark:border-gray-700">
          {/* æ–‡ç« å¤´éƒ¨ */}
          <header className="bg-gradient-to-r from-anime-pink/20 to-anime-blue/20 p-10 text-center">
            <h1 className="text-3xl md:text-4xl font-bold text-gray-800 dark:text-gray-100 mb-4">
              {postData.title}
            </h1>
            <time className="text-anime-blue dark:text-anime-pink font-medium bg-white/60 dark:bg-black/20 px-4 py-1 rounded-full text-sm">
              {postData.date}
            </time>
          </header>

          {/* æ–‡ç« æ­£æ–‡ */}
          <div 
            className="p-10 prose prose-pink dark:prose-invert max-w-none prose-headings:text-anime-blue dark:prose-headings:text-anime-pink prose-a:text-anime-pink"
            dangerouslySetInnerHTML={{ __html: postData.contentHtml || '' }} 
          />
          
          {/* è¯„è®ºåŒº */}
          <div className="px-10 pb-10">
            <Comments />
          </div>
        </article>
      </main>
    </div>
  );
}
```

---

# ç¬¬ä¸‰ç« ï¼šæ·»åŠ ç®€å•çš„æœç´¢åŠŸèƒ½

æ–‡ç« å˜å¤šåï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæœç´¢æ¡†ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å…ˆåœ¨ **å½’æ¡£é¡µé¢** æ·»åŠ ä¸€ä¸ªæœç´¢æ¡†ï¼Œç”¨æ¥è¿‡æ»¤æ–‡ç« åˆ—è¡¨ã€‚

## 1. åˆ›å»ºæœç´¢ç»„ä»¶

å› ä¸ºæœç´¢éœ€è¦ç”¨æˆ·è¾“å…¥ï¼ˆäº¤äº’ï¼‰ï¼Œæ‰€ä»¥å¿…é¡»æ˜¯ä¸€ä¸ª `Client Component`ï¼ˆå®¢æˆ·ç«¯ç»„ä»¶ï¼‰ã€‚

æ–°å»ºæ–‡ä»¶ `src/components/SearchPosts.tsx`ï¼š

```tsx
'use client';

import { useState } from 'react';
import Link from 'next/link';

// å®šä¹‰æ–‡ç« æ•°æ®çš„ç±»å‹
interface Post {
  id: string;
  title: string;
  date: string;
  description?: string;
}

export default function SearchPosts({ posts }: { posts: Post[] }) {
  const [query, setQuery] = useState('');

  // æ ¹æ®è¾“å…¥è¿‡æ»¤æ–‡ç« 
  const filteredPosts = posts.filter((post) => {
    const searchContent = (post.title + post.description).toLowerCase();
    return searchContent.includes(query.toLowerCase());
  });

  return (
    <div>
      {/* æœç´¢æ¡† */}
      <div className="mb-10 relative max-w-md mx-auto">
        <input
          type="text"
          placeholder="æœç´¢æ–‡ç« ..."
          value={query}
          onChange={(e) => setQuery(e.target.value)}
          className="w-full px-6 py-3 rounded-full border-2 border-anime-pink/30 focus:border-anime-pink focus:outline-none bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm transition-all text-center placeholder-gray-400 dark:text-gray-100"
        />
        <span className="absolute right-4 top-3.5 text-anime-pink">ğŸ”</span>
      </div>

      {/* æ–‡ç« åˆ—è¡¨ (åŸæœ¬åœ¨ archive/page.tsx é‡Œçš„é‚£éƒ¨åˆ†ä»£ç ç§»åˆ°è¿™é‡Œ) */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {filteredPosts.map((post) => (
          <article
            key={post.id}
            className="group bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg shadow-anime-pink/20 dark:shadow-none hover:shadow-anime-pink/40 hover:-translate-y-1 transition-all duration-300 border border-gray-100 dark:border-gray-700 flex flex-col"
          >
            <div className="mb-4">
              <span className="text-xs font-medium text-anime-blue bg-anime-blue/10 dark:bg-anime-blue/20 px-2 py-1 rounded-full">
                {post.date}
              </span>
            </div>
            <h2 className="text-xl font-bold mb-2 group-hover:text-anime-pink transition-colors text-gray-800 dark:text-gray-100">
              {post.title}
            </h2>
            <p className="text-gray-500 dark:text-gray-400 text-sm line-clamp-3 mb-4 flex-grow">
              {post.description}
            </p>
            <Link
              href={`/posts/${post.id}`}
              className="text-sm font-medium text-anime-pink hover:text-anime-blue transition-colors mt-auto"
            >
              é˜…è¯»æ›´å¤š â†’
            </Link>
          </article>
        ))}
      </div>
      
      {filteredPosts.length === 0 && (
        <div className="text-center text-gray-500 py-10">
          æ²¡æœ‰æ‰¾åˆ°ç›¸å…³æ–‡ç«  (ï½¡â€¢Ìï¸¿â€¢Ì€ï½¡)
        </div>
      )}
    </div>
  );
}
```

## 2. ä¿®æ”¹å½’æ¡£é¡µé¢

ç°åœ¨æˆ‘ä»¬éœ€è¦ä¿®æ”¹ `src/app/archive/page.tsx`ï¼Œè®©å®ƒä½¿ç”¨æˆ‘ä»¬åˆšå†™çš„ `SearchPosts` ç»„ä»¶ã€‚

```tsx
import Link from 'next/link';
import { getAllPosts } from '@/lib/posts';
import ThemeToggle from '@/components/ThemeToggle';
import SearchPosts from '@/components/SearchPosts'; // å¼•å…¥æ–°ç»„ä»¶

export default function Archive() {
  const posts = getAllPosts();

  return (
    <div className="min-h-screen text-gray-800 dark:text-gray-100 font-sans relative z-10">
      {/* Header (ä¿æŒä¸å˜) */}
      <header className="fixed top-0 w-full z-50 backdrop-blur-md bg-white/30 dark:bg-black/30 border-b border-white/20 dark:border-white/10">
        <div className="max-w-6xl mx-auto px-6 h-16 flex items-center justify-between">
          <div className="text-xl font-bold text-anime-blue tracking-wider">
            AnimeBlog
          </div>
          <nav className="flex gap-6 text-sm font-medium text-gray-600 dark:text-gray-300 items-center">
            <Link href="/" className="hover:text-anime-pink transition-colors">é¦–é¡µ</Link>
            <Link href="/archive" className="hover:text-anime-pink transition-colors">å½’æ¡£</Link>
            <Link href="/about" className="hover:text-anime-pink transition-colors">å…³äº</Link>
            <ThemeToggle />
          </nav>
        </div>
      </header>

      {/* Main Content */}
      <main className="max-w-6xl mx-auto px-6 py-24">
        <div className="text-center mb-12">
          <h1 className="text-3xl font-bold text-gray-800 dark:text-gray-100 mb-4">æ–‡ç« å½’æ¡£</h1>
          <p className="text-gray-500 dark:text-gray-400">è¿™é‡Œè®°å½•äº†æ‰€æœ‰çš„æ€ç»ªä¸è¶³è¿¹</p>
        </div>
        
        {/* ä½¿ç”¨æœç´¢ç»„ä»¶æ¥æ˜¾ç¤ºæ–‡ç« åˆ—è¡¨ */}
        <SearchPosts posts={posts} />
      </main>

      {/* Footer */}
      <footer className="py-8 text-center text-gray-400 text-sm">
        Â© {new Date().getFullYear()} AnimeBlog. Built with Next.js & Tailwind.
      </footer>
    </div>
  );
}
```

---
**ç°åœ¨çš„ä»»åŠ¡**ï¼š
1.  å…ˆå®Œæˆ **ç¬¬äºŒç« **ï¼ŒæŠŠæ–‡ç« è¯¦æƒ…é¡µçš„æ ·å¼ç»Ÿä¸€äº†ã€‚
2.  ç„¶åå°è¯• **ç¬¬ä¸‰ç« **ï¼Œç»™å½’æ¡£é¡µåŠ ä¸Šæœç´¢åŠŸèƒ½ã€‚
3.  åšå®Œå‘Šè¯‰æˆ‘ï¼Œæˆ‘ä»¬å†ç»§ç»­ï¼

---
**ç°åœ¨çš„ä»»åŠ¡**ï¼š
è¯·å…ˆå»å®Œæˆ **ç¬¬ä¸€æ­¥**ï¼Œæ‹¿åˆ° `repoId` å’Œ `categoryId`ï¼Œç„¶åå‘Šè¯‰æˆ‘ï¼Œæˆ‘æ¥å¸®ä½ å†™ä»£ç ï¼

æˆ‘å®Œæˆäº†ç¬¬äºŒç« å’Œç¬¬ä¸‰ç« ,æ•ˆæœå¦‚å›¾æ‰€ç¤º

![image-20251212155929020](C:\Users\donuq\AppData\Roaming\Typora\typora-user-images\image-20251212155929020.png)![image-20251212155951677](C:\Users\donuq\AppData\Roaming\Typora\typora-user-images\image-20251212155951677.png)

æˆ‘æƒ³å·©å›ºä¸‹ç°åœ¨çš„çŸ¥è¯†

---

# ç¬¬å››ç« ï¼šçŸ¥è¯†ç‚¹å·©å›º (Review)

å¤ªæ£’äº†ï¼ä½ å·²ç»æˆåŠŸå®Œæˆäº†è¿›é˜¶åŠŸèƒ½çš„å¼€å‘ã€‚ä¸ºäº†è®©ä½ çœŸæ­£æŒæ¡è¿™äº›æŠ€èƒ½ï¼Œæˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹åˆšæ‰ç”¨åˆ°çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ã€‚

## 1. å®¢æˆ·ç«¯ç»„ä»¶ vs æœåŠ¡ç«¯ç»„ä»¶ ('use client')
ä½ å¯èƒ½æ³¨æ„åˆ°äº†ï¼Œæˆ‘ä»¬åœ¨ `SearchPosts.tsx` å’Œ `Comments.tsx` çš„ç¬¬ä¸€è¡Œéƒ½å†™äº† `'use client'`ã€‚
*   **æœåŠ¡ç«¯ç»„ä»¶ (é»˜è®¤)**: Next.js é»˜è®¤æ‰€æœ‰çš„ç»„ä»¶éƒ½æ˜¯åœ¨æœåŠ¡å™¨ä¸Šæ¸²æŸ“å¥½ HTML å†å‘ç»™æµè§ˆå™¨çš„ã€‚è¿™æ ·é€Ÿåº¦å¿«ï¼ŒSEO å¥½ã€‚
*   **å®¢æˆ·ç«¯ç»„ä»¶**: å½“æˆ‘ä»¬éœ€è¦**äº¤äº’**ï¼ˆæ¯”å¦‚ç‚¹å‡»æŒ‰é’®ã€è¾“å…¥æ–‡å­—ã€ä½¿ç”¨ `useState`ï¼‰æ—¶ï¼Œå¿…é¡»å‘Šè¯‰ Next.jsï¼šâ€œè¿™ä¸ªç»„ä»¶éœ€è¦åœ¨æµè§ˆå™¨é‡Œè¿è¡Œ JavaScriptâ€ã€‚
*   **åˆ¤æ–­æ ‡å‡†**: åªè¦ç”¨åˆ°äº† `useState`, `useEffect`, `onClick` ç­‰åŠŸèƒ½ï¼Œå°±å¿…é¡»åŠ  `'use client'`ã€‚

## 2. React çŠ¶æ€ç®¡ç† (useState)
åœ¨æœç´¢åŠŸèƒ½ä¸­ï¼Œæˆ‘ä»¬ç”¨åˆ°äº† `useState`ï¼š
```tsx
const [query, setQuery] = useState('');
```
*   **query**: è¿™æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå­˜ç€ç”¨æˆ·å½“å‰è¾“å…¥çš„æœç´¢è¯ã€‚
*   **setQuery**: è¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥æ›´æ–° `query` çš„å€¼ã€‚
*   **åŸç†**: æ¯å½“ç”¨æˆ·åœ¨è¾“å…¥æ¡†é‡Œæ‰“å­—ï¼Œ`onChange` äº‹ä»¶å°±ä¼šè°ƒç”¨ `setQuery`ï¼Œæ›´æ–° `query`ã€‚ä¸€æ—¦ `query` å˜äº†ï¼ŒReact å°±ä¼šè‡ªåŠ¨é‡æ–°è¿è¡Œç»„ä»¶ä»£ç ï¼Œè®¡ç®—å‡ºæ–°çš„ `filteredPosts`ï¼Œé¡µé¢ä¸Šçš„æ–‡ç« åˆ—è¡¨ä¹Ÿå°±è·Ÿç€å˜äº†ã€‚è¿™å°±æ˜¯ React çš„â€œå“åº”å¼â€é­”åŠ›ï¼

## 3. ç»„ä»¶åŒ–æ€ç»´ (Component)
æˆ‘ä»¬æ²¡æœ‰æŠŠæœç´¢ä»£ç ç›´æ¥å†™åœ¨ `archive/page.tsx` é‡Œï¼Œè€Œæ˜¯å•ç‹¬åšäº†ä¸€ä¸ª `SearchPosts.tsx`ã€‚
*   **å¥½å¤„**:
    1.  **ä»£ç æ¸…æ™°**: `archive/page.tsx` åªè´Ÿè´£è·å–æ•°æ®å’Œå¸ƒå±€ï¼Œä¸è´Ÿè´£å¤æ‚çš„æœç´¢é€»è¾‘ã€‚
    2.  **å¤ç”¨æ€§**: å¦‚æœä»¥åä½ æƒ³åœ¨é¦–é¡µä¹ŸåŠ ä¸ªæœç´¢æ¡†ï¼Œç›´æ¥å¼•å…¥è¿™ä¸ªç»„ä»¶å°±è¡Œäº†ï¼Œä¸ç”¨é‡å†™ä»£ç ã€‚

## 4. æ ·å¼ç»Ÿä¸€ä¸å¸ƒå±€
æˆ‘ä»¬æ‰‹åŠ¨æŠŠ `Header` ä»£ç å¤åˆ¶åˆ°äº†æ–‡ç« è¯¦æƒ…é¡µã€‚
*   **æ€è€ƒ**: å…¶å®è¿™æ ·å¤åˆ¶ç²˜è´´æœ‰ç‚¹éº»çƒ¦ï¼Œå¦‚æœä»¥åè¦æ”¹å¯¼èˆªæ ï¼Œå¾—æ”¹ä¸‰ä¸ªåœ°æ–¹ï¼ˆé¦–é¡µã€å½’æ¡£ã€æ–‡ç« é¡µï¼‰ã€‚
*   **è¿›é˜¶ä¼˜åŒ–**: åœ¨ Next.js ä¸­ï¼Œé€šå¸¸ä¼šæŠŠå¯¼èˆªæ æ”¾åœ¨ `layout.tsx` é‡Œï¼Œè¿™æ ·å®ƒå°±ä¼šè‡ªåŠ¨å‡ºç°åœ¨æ‰€æœ‰é¡µé¢ä¸Šï¼Œä¸éœ€è¦æ¯ä¸ªé¡µé¢éƒ½å†™ä¸€éã€‚è¿™æ˜¯æˆ‘ä»¬æœªæ¥å¯ä»¥ä¼˜åŒ–çš„æ–¹å‘ï¼

---

## ä¸‹ä¸€æ­¥æŒ‘æˆ˜ï¼šåˆ†é¡µåŠŸèƒ½ (Pagination)
æ—¢ç„¶ä½ å·²ç»å­¦ä¼šäº†æœç´¢ï¼ˆè¿‡æ»¤æ•°æ®ï¼‰ï¼Œé‚£ä¹ˆ**åˆ†é¡µ**ï¼ˆåˆ‡åˆ†æ•°æ®ï¼‰å°±æ˜¯æœ€å¥½çš„ä¸‹ä¸€ä¸ªæŒ‘æˆ˜ã€‚
å½“ä½ çš„æ–‡ç« å†™åˆ° 100 ç¯‡çš„æ—¶å€™ï¼Œä½ è‚¯å®šä¸å¸Œæœ›ä¸€é¡µå…¨å±•ç¤ºå‡ºæ¥ã€‚

**å‡†å¤‡å¥½ç»§ç»­äº†å—ï¼Ÿå‘Šè¯‰æˆ‘ï¼Œæˆ‘ä»¬å¼€å§‹ä¸‹ä¸€ç« ï¼**



åˆ†é¡µåŠŸèƒ½æ€ä¹ˆåš,æ˜¯ä»€ä¹ˆæ€è·¯

---

# ç¬¬äº”ç« ï¼šå®ç°åˆ†é¡µåŠŸèƒ½ (Pagination)

å½“æ–‡ç« è¶Šæ¥è¶Šå¤šæ—¶ï¼Œæˆ‘ä»¬ä¸èƒ½æŠŠå®ƒä»¬å…¨éƒ¨å †åœ¨ä¸€ä¸ªé¡µé¢ä¸Šã€‚åˆ†é¡µåŠŸèƒ½çš„æœ¬è´¨å…¶å®å°±æ˜¯**â€œåˆ‡è›‹ç³•â€**ã€‚

## 1. åˆ†é¡µçš„æ ¸å¿ƒæ€è·¯ (Logic)

å‡è®¾ä½ æœ‰ 10 å—è›‹ç³•ï¼ˆ10 ç¯‡æ–‡ç« ï¼‰ï¼Œä½ æƒ³æ¯æ¬¡åªç»™å®¢äººçœ‹ 3 å—ï¼ˆæ¯é¡µ 3 ç¯‡ï¼‰ã€‚

1.  **ç¬¬ä¸€é¡µ (Page 1)**: ä½ åˆ‡å‡ºç¬¬ 1~3 å— (`posts.slice(0, 3)`)ã€‚
2.  **ç¬¬äºŒé¡µ (Page 2)**: ä½ åˆ‡å‡ºç¬¬ 4~6 å— (`posts.slice(3, 6)`)ã€‚
3.  **ç¬¬ä¸‰é¡µ (Page 3)**: ä½ åˆ‡å‡ºç¬¬ 7~9 å— (`posts.slice(6, 9)`)ã€‚
4.  **ç¬¬å››é¡µ (Page 4)**: å‰©ä¸‹ç¬¬ 10 å— (`posts.slice(9, 12)`)ã€‚

**å…¬å¼**:

*   **å¼€å§‹åˆ‡çš„ä½ç½®** = `(å½“å‰é¡µç  - 1) * æ¯é¡µæ•°é‡`
*   **ç»“æŸåˆ‡çš„ä½ç½®** = `å¼€å§‹åˆ‡çš„ä½ç½® + æ¯é¡µæ•°é‡`

## 2. å®æˆ˜ï¼šå‡çº§ SearchPosts ç»„ä»¶

å› ä¸ºæˆ‘ä»¬çš„å½’æ¡£é¡µé¢å·²ç»ç”¨ `SearchPosts` ç»„ä»¶æ¥æ˜¾ç¤ºæ–‡ç« åˆ—è¡¨äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥åœ¨è¿™ä¸ªç»„ä»¶é‡ŒåŠ åˆ†é¡µåŠŸèƒ½ã€‚è¿™æ ·è¿˜èƒ½é¡ºä¾¿å®ç°â€œæœç´¢ç»“æœçš„åˆ†é¡µâ€ï¼

æ‰“å¼€ `src/components/SearchPosts.tsx`ï¼Œç”¨ä¸‹é¢çš„ä»£ç **å®Œå…¨æ›¿æ¢**å®ƒï¼š

```tsx
'use client';

import { useState } from 'react';
import Link from 'next/link';

interface Post {
  id: string;
  title: string;
  date: string;
  description?: string;
}

const POSTS_PER_PAGE = 6; // æ¯é¡µæ˜¾ç¤º 6 ç¯‡æ–‡ç« 

export default function SearchPosts({ posts }: { posts: Post[] }) {
  const [query, setQuery] = useState('');
  const [currentPage, setCurrentPage] = useState(1); // æ–°å¢ï¼šå½“å‰é¡µç çŠ¶æ€

  // 1. å…ˆè¿›è¡Œæœç´¢è¿‡æ»¤
  const filteredPosts = posts.filter((post) => {
    const searchContent = (post.title + post.description).toLowerCase();
    return searchContent.includes(query.toLowerCase());
  });

  // 2. è®¡ç®—åˆ†é¡µæ•°æ®
  const totalPages = Math.ceil(filteredPosts.length / POSTS_PER_PAGE);
  const startIndex = (currentPage - 1) * POSTS_PER_PAGE;
  const currentPosts = filteredPosts.slice(startIndex, startIndex + POSTS_PER_PAGE);

  // å½“ç”¨æˆ·æœç´¢æ—¶ï¼Œé‡ç½®åˆ°ç¬¬ä¸€é¡µ
  const handleSearch = (e: React.ChangeEvent<HTMLInputElement>) => {
    setQuery(e.target.value);
    setCurrentPage(1);
  };

  return (
    <div>
      {/* æœç´¢æ¡† */}
      <div className="mb-10 relative max-w-md mx-auto">
        <input
          type="text"
          placeholder="æœç´¢æ–‡ç« ..."
          value={query}
          onChange={handleSearch}
          className="w-full px-6 py-3 rounded-full border-2 border-anime-pink/30 focus:border-anime-pink focus:outline-none bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm transition-all text-center placeholder-gray-400 dark:text-gray-100"
        />
        <span className="absolute right-4 top-3.5 text-anime-pink">ğŸ”</span>
      </div>

      {/* æ–‡ç« åˆ—è¡¨ (æ˜¾ç¤ºåˆ‡åˆ†åçš„ currentPosts) */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {currentPosts.map((post) => (
          <article
            key={post.id}
            className="group bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg shadow-anime-pink/20 dark:shadow-none hover:shadow-anime-pink/40 hover:-translate-y-1 transition-all duration-300 border border-gray-100 dark:border-gray-700 flex flex-col"
          >
            <div className="mb-4">
              <span className="text-xs font-medium text-anime-blue bg-anime-blue/10 dark:bg-anime-blue/20 px-2 py-1 rounded-full">
                {post.date}
              </span>
            </div>
            <h2 className="text-xl font-bold mb-2 group-hover:text-anime-pink transition-colors text-gray-800 dark:text-gray-100">
              {post.title}
            </h2>
            <p className="text-gray-500 dark:text-gray-400 text-sm line-clamp-3 mb-4 flex-grow">
              {post.description}
            </p>
            <Link
              href={`/posts/${post.id}`}
              className="text-sm font-medium text-anime-pink hover:text-anime-blue transition-colors mt-auto"
            >
              é˜…è¯»æ›´å¤š â†’
            </Link>
          </article>
        ))}
      </div>

      {/* æ— ç»“æœæç¤º */}
      {filteredPosts.length === 0 && (
        <div className="text-center text-gray-500 py-10">
          æ²¡æœ‰æ‰¾åˆ°ç›¸å…³æ–‡ç«  (ï½¡â€¢Ìï¸¿â€¢Ì€ï½¡)
        </div>
      )}

      {/* åˆ†é¡µæ§åˆ¶æŒ‰é’® */}
      {filteredPosts.length > POSTS_PER_PAGE && (
        <div className="flex justify-center items-center gap-4 mt-12">
          <button
            onClick={() => setCurrentPage((p) => Math.max(1, p - 1))}
            disabled={currentPage === 1}
            className="px-4 py-2 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 disabled:opacity-50 hover:bg-anime-pink hover:text-white transition-colors"
          >
            ä¸Šä¸€é¡µ
          </button>
          
          <span className="text-gray-600 dark:text-gray-300 font-medium">
            ç¬¬ {currentPage} é¡µ / å…± {totalPages} é¡µ
          </span>

          <button
            onClick={() => setCurrentPage((p) => Math.min(totalPages, p + 1))}
            disabled={currentPage === totalPages}
            className="px-4 py-2 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 disabled:opacity-50 hover:bg-anime-pink hover:text-white transition-colors"
          >
            ä¸‹ä¸€é¡µ
          </button>
        </div>
      )}
    </div>
  );
}
```

## 3. è¯•ä¸€è¯•
ä¿å­˜æ–‡ä»¶åï¼Œå»ä½ çš„å½’æ¡£é¡µé¢ (`/archive`) çœ‹çœ‹ã€‚
å¦‚æœä½ çš„æ–‡ç« è¶…è¿‡äº† 6 ç¯‡ï¼Œåº•éƒ¨å°±ä¼šå‡ºç°â€œä¸Šä¸€é¡µ/ä¸‹ä¸€é¡µâ€çš„æŒ‰é’®ã€‚
å¦‚æœä½ åœ¨æœç´¢æ¡†é‡Œè¾“å…¥å†…å®¹ï¼Œåˆ†é¡µä¹Ÿä¼šè‡ªåŠ¨æ ¹æ®æœç´¢ç»“æœé‡æ–°è®¡ç®—ã€‚

---
**ç°åœ¨çš„ä»»åŠ¡**ï¼š
1.  æŠŠä¸Šé¢çš„ä»£ç å¤åˆ¶åˆ° `src/components/SearchPosts.tsx`ã€‚
2.  å»å½’æ¡£é¡µé¢æµ‹è¯•ä¸€ä¸‹åˆ†é¡µåŠŸèƒ½æ˜¯å¦æ­£å¸¸ã€‚
3.  **æ€è€ƒé¢˜**ï¼šå¦‚æœæˆ‘æƒ³æ¯é¡µæ˜¾ç¤º 9 ç¯‡æ–‡ç« ï¼Œåº”è¯¥æ”¹å“ªé‡Œï¼Ÿ

åšå®Œå‘Šè¯‰æˆ‘ï¼Œæˆ‘ä»¬ç»§ç»­ï¼



æ€è€ƒé¢˜:æ”¹const POSTS_PER_PAGEçš„å€¼å°±è¡Œ,æ˜¾ç¤º9åˆ™æ”¹æˆ9

---

# ç¬¬å…­ç« ï¼šéƒ¨ç½²é—®é¢˜ä¿®å¤ (Troubleshooting)

åœ¨å°†ä»£ç éƒ¨ç½²åˆ° Vercel æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°ä¸€äº›æ„å»ºé”™è¯¯ã€‚è¿™é‡Œè®°å½•äº†æœ€è¿‘é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜åŠå…¶è§£å†³æ–¹æ³•ã€‚

## 1. ç®€å†é¡µé¢æ„å»ºæŠ¥é”™ (styled-jsx Error)

*   **æŠ¥é”™ä¿¡æ¯**:
    ```
    Error: Turbopack build failed with 1 errors:
    ./src/app/resume
    Invalid import 'client-only' cannot be imported from a Server Component module.
    The error was caused by using 'styled-jsx'. It only works in a Client Component...
    ```
*   **åŸå› **:
    æˆ‘ä»¬åœ¨ `src/app/resume/page.tsx` ä¸­ä½¿ç”¨äº† `<style jsx>` æ ‡ç­¾æ¥å¤„ç†æ‰“å°æ ·å¼ã€‚`styled-jsx` æ˜¯ä¸€ä¸ª CSS-in-JS åº“ï¼Œå®ƒéœ€è¦åœ¨æµè§ˆå™¨ç«¯è¿è¡Œï¼ˆClient Sideï¼‰ï¼Œä½† Next.js çš„é¡µé¢é»˜è®¤æ˜¯æœåŠ¡ç«¯ç»„ä»¶ï¼ˆServer Componentï¼‰ã€‚
*   **ä¿®å¤æ–¹æ³•**:
    åœ¨ `src/app/resume/page.tsx` æ–‡ä»¶çš„**æœ€é¡¶éƒ¨**æ·»åŠ  `'use client';` æŒ‡ä»¤ã€‚
    ```tsx
    'use client'; // <--- åŠ ä¸Šè¿™ä¸€è¡Œ

    import Link from 'next/link';
    // ...
    ```
*   **çŸ¥è¯†ç‚¹**:
    åªè¦ä½ çš„ç»„ä»¶é‡Œç”¨åˆ°äº† `<style jsx>`ã€`useState`ã€`useEffect` æˆ–è€…æµè§ˆå™¨ç‰¹æœ‰çš„ APIï¼ˆæ¯”å¦‚ `window.print()`ï¼‰ï¼Œå°±å¿…é¡»æŠŠå®ƒæ ‡è®°ä¸º `'use client'`ã€‚
